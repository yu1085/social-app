# 阿里云金融级实人认证集成指南

## ✅ 已完成配置

### 1. 项目配置
- ✅ `app/build.gradle.kts` - 添加阿里云金融级实人认证SDK依赖
- ✅ `app/src/main/java/com/example/myapplication/service/AliyunFaceAuthService.kt` - 金融级实人认证服务实现
- ✅ `app/src/main/java/com/example/myapplication/RealPersonAuthActivity.kt` - 真人认证界面
- ✅ `app/src/main/AndroidManifest.xml` - 添加相机权限和Activity配置

### 2. 功能特性
- **金融级实人认证**：99.95%可靠性，金融级安全标准
- **活体检测**：防屏幕翻拍、打印面具、摄像头劫持等攻击
- **人脸检测**：精准定位五官位置，支持关键点检测
- **人证一致性**：验证身份证与本人是否一致
- **Deepfake检测**：免费公测，防范AI换脸攻击

## 🚀 下一步操作

### 1. 开通阿里云金融级实人认证服务 ✅
1. ✅ 登录 [阿里云控制台](https://idverification.console.aliyun.com/)
2. ✅ 开通**金融级实人认证**服务
3. ✅ 购买流量包：100次认证（3个月有效期，¥80.00）
4. ✅ 进入"接入场景设置"页面

### 2. 获取配置信息 🔧
在控制台中获取以下信息：

#### A. 访问控制配置
- 进入 [访问控制RAM](https://ram.console.aliyun.com/manage/ak)
- 获取 **AccessKey ID** 和 **AccessKey Secret**

#### B. 金融级实人认证配置
- 在"接入场景设置"页面，点击"新建场景"
- 获取 **SceneId**（场景ID）
- 获取 **Region ID**（通常是 cn-shanghai）

#### C. OSS授权配置（可选）
- 如果需要存储认证照片，需要开通OSS授权
- 获取 **OSS Bucket** 名称

### 3. 更新配置信息
在 `AliyunFaceAuthService.kt` 中更新以下配置：

```kotlin
// 阿里云金融级实人认证配置（需要替换为真实配置）
private val accessKeyId = "your_access_key_id"  // 替换为您的AccessKey ID
private val accessKeySecret = "your_access_key_secret"  // 替换为您的AccessKey Secret
private val regionId = "cn-shanghai"  // 替换为您的Region ID
private val cloudAuthEndpoint = "cloudauth.cn-shanghai.aliyuncs.com"  // 实人认证端点
private val faceBodyEndpoint = "facebody.cn-shanghai.aliyuncs.com"  // 人脸识别端点

// 金融级实人认证场景配置
private val sceneId = "your_scene_id"  // 替换为您的场景ID
private val productCode = "ID_PRO"  // 金融级实人认证产品代码
```

### 4. 初始化服务
在 `RealPersonAuthActivity.kt` 的 `onCreate` 方法中添加：

```kotlin
// 初始化阿里云实人认证服务
AliyunFaceAuthService.getInstance().initialize(this)
```

## 📱 使用方式

### 1. 启动真人认证
```kotlin
val intent = Intent(this, RealPersonAuthActivity::class.java)
startActivity(intent)
```

### 2. 认证流程
1. 用户点击"去认证"按钮
2. 进入相机界面进行人脸拍摄
3. 系统自动进行人脸检测和活体检测
4. 显示认证结果

## 🔧 技术实现

### 1. 人脸检测
- 使用阿里云人脸识别API
- 检测人脸位置和关键点
- 验证图片质量

### 2. 活体检测
- 使用阿里云活体检测API
- 防屏幕翻拍攻击
- 防打印面具攻击

### 3. 实人认证
- 结合人脸检测和活体检测
- 提供金融级安全认证
- 支持多种认证场景

## 💰 费用说明

### 1. 免费试用
- 实人认证提供免费试用额度
- 人脸识别提供免费试用额度
- 建议先使用免费额度测试

### 2. 正式使用
- 实人认证：约0.1-0.3元/次
- 人脸识别：约0.1-0.2元/次
- 支持预付费资源包

## 🛡️ 安全特性

### 1. 攻击防护
- 人脸保镖安全防护
- 实时检测设备环境安全
- 全面对抗身份伪造攻击

### 2. 数据安全
- 国密算法加密传输
- 一图一密加密算法
- 支持RAM访问控制

### 3. 合规资质
- ISO 27001等权威认证
- 工信部SDK备案
- 公安部安全检测认证

## 📞 技术支持

- 阿里云技术支持：4008013260
- 实人认证文档：https://help.aliyun.com/product/155003.html
- 控制台：https://idverification.console.aliyun.com/

## ⚠️ 注意事项

1. **配置安全**：请妥善保管AccessKey信息，不要提交到代码仓库
2. **网络环境**：确保应用能够访问阿里云服务
3. **权限配置**：确保已添加相机权限
4. **测试环境**：建议先在测试环境验证功能

## 🎯 下一步

1. 获取阿里云配置信息
2. 更新代码中的配置
3. 测试认证功能
4. 部署到生产环境
