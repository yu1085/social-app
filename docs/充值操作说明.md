# 用户充值操作说明

## 概述
本目录包含了给用户ID `65899032` 和 `44479883` 各充值10000的多种实现方式。

## 文件说明

### 脚本文件
- `recharge_all_methods.bat` - 主入口脚本，提供多种充值方式选择
- `recharge_users.py` - Python直接操作数据库脚本
- `recharge_api.py` - 通过Spring Boot API充值脚本
- `recharge_users.sql` - 纯SQL脚本
- `RechargeScript.java` - Java直接操作数据库脚本
- `recharge_users.bat` - Java脚本运行批处理
- `run_recharge.bat` - Python脚本运行批处理

### 配置文件
- `requirements_recharge.txt` - Python依赖包列表

## 使用方法

### 方法1: 一键运行（推荐）
```bash
# 双击运行或在命令行执行
recharge_all_methods.bat
```
然后选择相应的充值方式。

### 方法2: Python直接操作数据库
```bash
# 安装依赖
pip install -r requirements_recharge.txt

# 执行充值
python recharge_users.py
```

### 方法3: 通过Spring Boot API
```bash
# 确保Spring Boot服务运行
start_backend.bat

# 执行充值
python recharge_api.py
```

### 方法4: 使用SQL脚本
```bash
# 连接到MySQL数据库
mysql -u root -p123456 socialmeet

# 执行SQL脚本
source recharge_users.sql
```

### 方法5: Java脚本
```bash
# 编译并运行
javac -cp "SocialMeet/lib/*" RechargeScript.java
java -cp ".;SocialMeet/lib/*" RechargeScript
```

## 数据库配置
- 主机: localhost:3306
- 数据库: socialmeet
- 用户名: root
- 密码: 123456

## 充值详情
- 用户ID: 65899032, 44479883
- 充值金额: 10000.00 CNY
- 充值类型: RECHARGE
- 描述: 管理员充值

## 安全说明
1. 所有脚本都使用事务，确保数据一致性
2. 如果用户不存在，会自动创建用户和钱包
3. 每次充值都会记录交易日志
4. 操作完成后会显示用户余额信息

## 故障排除

### 数据库连接失败
- 检查MySQL服务是否运行
- 确认数据库配置信息正确
- 检查防火墙设置

### API调用失败
- 确保Spring Boot服务正在运行 (http://localhost:8080)
- 检查API端点是否可访问
- 查看服务日志

### Python依赖问题
```bash
pip install --upgrade pip
pip install -r requirements_recharge.txt
```

## 验证充值结果
充值完成后，可以通过以下方式验证：

1. 查看控制台输出的余额信息
2. 登录应用查看钱包余额
3. 查询数据库：
```sql
SELECT u.id, u.username, w.balance, w.currency 
FROM users u 
JOIN wallets w ON u.id = w.user_id 
WHERE u.id IN (65899032, 44479883);
```

## 注意事项
- 请确保在测试环境中运行
- 建议先备份数据库
- 充值操作不可逆，请谨慎操作
